# ═══════════════════════════════════════════════════════════════════════════
# vAvA_core - Recipe txAdmin
# Framework FiveM modulaire, sécurisé et multilingue
# Version: 1.0.0
# ═══════════════════════════════════════════════════════════════════════════

$engine: 3
$onesync: on

name: vAvA_core Framework
version: 2.4.0
author: vAvA
description: |
    Framework FiveM modulaire, sécurisé et multilingue.
    
    Caractéristiques:
    - Système de personnages multi-personnage
    - Économie complète (cash, banque, argent sale)
    - Système de jobs
    - Inventaire moderne avec interface drag & drop
    - Gestion complète des armes et munitions
    - Hotbar (raccourcis 1-5)
    - Véhicules avec garage et persistance
    - Système de logs et sécurité
    - Support multilingue (FR, EN, ES)
    
    Modules inclus:
    - vAvA_core (framework principal)
    - vAvA_inventory (système d'inventaire)
    - vAvA_chat (chat RP avec commandes)
    - vAvA_keys (gestion des clés véhicules)
    - vAvA_concess (concessionnaire multi-types)
    - vAvA_garage (garage dynamique avec fourrière)
    - vAvA_jobshop (boutiques par métier)
    - vAvA_persist (persistance véhicules)
    - vAvA_sit (points d'assise avec animations)
    
    Prérequis:
    - Serveur MySQL/MariaDB
    - oxmysql
    - ox_lib (recommandé)
    - ox_target (recommandé)

tasks:
    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement des fichiers serveur CFX
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[cfx-default]
      ref: master
      src: https://github.com/citizenfx/cfx-server-data
      subpath: resources

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de oxmysql (dépendance requise)
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_file
      path: ./tmp/oxmysql.zip
      url: https://github.com/overextended/oxmysql/releases/download/v2.12.0/oxmysql.zip

    - action: unzip
      dest: ./resources/[standalone]
      src: ./tmp/oxmysql.zip

    - action: remove_path
      path: ./tmp

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de bob74_ipl (IPL loader)
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[standalone]/bob74_ipl
      ref: master
      src: https://github.com/Bob74/bob74_ipl

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de vAvA_core depuis GitHub
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[vava]/vAvA_core
      ref: main
      src: https://github.com/Nicolasbriet/vAvA_core

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module d'inventaire
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/inventory
      dest: ./resources/[vava]/vAvA_inventory

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module chat
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/chat
      dest: ./resources/[vava]/vAvA_chat

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module keys
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/keys
      dest: ./resources/[vava]/vAvA_keys

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module concess
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/concess
      dest: ./resources/[vava]/vAvA_concess

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module garage
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/garage
      dest: ./resources/[vava]/vAvA_garage

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module jobshop
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/jobshop
      dest: ./resources/[vava]/vAvA_jobshop

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module persist
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/persist
      dest: ./resources/[vava]/vAvA_persist

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module sit
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/sit
      dest: ./resources/[vava]/vAvA_sit

    # ═══════════════════════════════════════════════════════════════════════
    # Configuration du serveur
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/server.cfg
      dest: ./server.cfg

    # ═══════════════════════════════════════════════════════════════════════
    # Fin de l'installation
    # ═══════════════════════════════════════════════════════════════════════
    - action: waste_time
      seconds: 1

    - action: connect_database

    - action: query_database
      file: ./resources/[vava]/vAvA_core/database/sql/init_txadmin.sql
