# ═══════════════════════════════════════════════════════════════════════════
# vAvA_core - Recipe txAdmin
# Framework FiveM modulaire, sécurisé et multilingue
# Version: 1.0.0
# ═══════════════════════════════════════════════════════════════════════════

$engine: 3
$onesync: on

name: vAvA_core Framework
version: 3.1.1
author: vAvA
description: |
    Framework FiveM modulaire, sécurisé et multilingue.
    
    Caractéristiques:
    - Système de personnages multi-personnage
    - Économie complète (cash, banque, argent sale)
    - Système de jobs
    - Inventaire moderne avec interface drag & drop
    - Gestion complète des armes et munitions
    - Hotbar (raccourcis 1-5)
    - Véhicules avec garage et persistance
    - Système de logs et sécurité
    - Support multilingue (FR, EN, ES)
    - Testbench automatisé (tests et validation)
    
    Modules inclus:
    - vAvA_core (framework principal)
    - vAvA_loadingscreen (écran de chargement immersif)
    - vAvA_creator (créateur de personnage)
    - vAvA_economy (système économique auto-adaptatif)
    - vAvA_inventory (système d'inventaire)
    - vAvA_chat (chat RP avec commandes)
    - vAvA_keys (gestion des clés véhicules)
    - vAvA_jobs (système de jobs EMS/Police/Mechanic + créateur dynamique)
    - vAvA_concess (concessionnaire multi-types)
    - vAvA_garage (garage dynamique avec fourrière)
    - vAvA_jobshop (boutiques par métier)
    - vAvA_persist (persistance véhicules)
    - vAvA_sit (points d'assise avec animations)
    - vAvA_status (système de besoins: faim, soif, santé)
    - vAvA_target (système de ciblage 3D moderne)
    - vAvA_ems (système médical EMS et ambulancier)
    - vAvA_testbench (système de test automatisé)
    
    Prérequis:
    - Serveur MySQL/MariaDB
    - oxmysql
    - ox_lib (recommandé)
    - ox_target (recommandé)

tasks:
    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement des fichiers serveur CFX
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[cfx-default]
      ref: master
      src: https://github.com/citizenfx/cfx-server-data
      subpath: resources

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de oxmysql (dépendance requise)
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_file
      path: ./tmp/oxmysql.zip
      url: https://github.com/overextended/oxmysql/releases/download/v2.12.0/oxmysql.zip

    - action: unzip
      dest: ./resources/[standalone]
      src: ./tmp/oxmysql.zip

    - action: remove_path
      path: ./tmp

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de bob74_ipl (IPL loader)
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[standalone]/bob74_ipl
      ref: master
      src: https://github.com/Bob74/bob74_ipl

    # ═══════════════════════════════════════════════════════════════════════
    # Téléchargement de vAvA_core depuis GitHub
    # ═══════════════════════════════════════════════════════════════════════
    - action: download_github
      dest: ./resources/[vava]/vAvA_core
      ref: main
      src: https://github.com/Nicolasbriet/vAvA_core

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module loadingscreen
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/loadingscreen
      dest: ./resources/[vava]/vAvA_loadingscreen

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module creator (créateur de personnage)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/creator
      dest: ./resources/[vava]/vAvA_creator

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module d'inventaire
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/inventory
      dest: ./resources/[vava]/vAvA_inventory

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module chat
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/chat
      dest: ./resources/[vava]/vAvA_chat

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module keys
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/keys
      dest: ./resources/[vava]/vAvA_keys

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module economy (système économique)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/economy
      dest: ./resources/[vava]/vAvA_economy

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module jobs (système de jobs dynamique)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/jobs
      dest: ./resources/[vava]/vAvA_jobs

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module concess
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/concess
      dest: ./resources/[vava]/vAvA_concess

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module garage
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/garage
      dest: ./resources/[vava]/vAvA_garage

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module jobshop
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/jobshop
      dest: ./resources/[vava]/vAvA_jobshop

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module persist
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/persist
      dest: ./resources/[vava]/vAvA_persist

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module sit
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/sit
      dest: ./resources/[vava]/vAvA_sit

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module status (système de besoins: faim, soif, santé)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/status
      dest: ./resources/[vava]/vAvA_status

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module target (système de ciblage 3D moderne)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/target
      dest: ./resources/[vava]/vAvA_target

    # ═══════════════════════════════════════════════════════════════════════
    # Copie du module testbench (système de test automatisé)
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/testbench
      dest: ./resources/[vava]/vAvA_testbench

    # ═══════════════════════════════════════════════════════════════════════    # Copie du module EMS (système médical et ambulancier)
    # ═══════════════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/ems
      dest: ./resources/[vava]/vAvA_ems
    # ═══════════════════════════════════════════════════════════════════════════
    # Copie du module police (système police et forces de l'ordre)
    # ═══════════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/police
      dest: ./resources/[vava]/vAvA_police

    # ═══════════════════════════════════════════════════════════════════════════
    # Copie du module player_manager (gestion avancée des joueurs)
    # ═══════════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/modules/player_manager
      dest: ./resources/[vava]/vAvA_player_manager
    # ═══════════════════════════════════════════════════════════════════════════════    # Configuration du serveur
    # ═══════════════════════════════════════════════════════════════════════
    - action: move_path
      src: ./resources/[vava]/vAvA_core/server.cfg
      dest: ./server.cfg

    # ═══════════════════════════════════════════════════════════════════════
    # Fin de l'installation
    # ═══════════════════════════════════════════════════════════════════════
    - action: waste_time
      seconds: 1

    - action: connect_database

    - action: query_database
      file: ./resources/[vava]/vAvA_core/database/sql/init_txadmin.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du système de jobs (tables et données par défaut)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_core/database/sql/jobs_system.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du système économique (tables et configuration)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_core/database/sql/economy_system.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du système EMS (tables médicales et stock sanguin)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_ems/sql/ems_system.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du système de clés véhicules (partage et historique)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_keys/sql/keys_system.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du système police (amendes, prison, casier judiciaire)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_police/sql/police_system.sql

    # ═══════════════════════════════════════════════════════════════════════
    # Installation du player manager (gestion avancée des joueurs)
    # ═══════════════════════════════════════════════════════════════════════
    - action: query_database
      file: ./resources/[vava]/vAvA_player_manager/sql/player_manager.sql
